<!--
data-separator="^---$"
data-separator-vertical="^----$"
data-separator-notes="^Note:"
data-charset="utf-8"
-->

# ValidaciÃ³ de dades amb XSD
## Abans de transformar, cal comprovar

---

## On som?
- Ja tenim dades en **XML**
- Ja sabem transformar-les amb **XSLT**
- PerÃ²â€¦ **quÃ¨ passa si les dades estan malament?**

Note:
Temps diapositiva: 3 min  
Temps acumulat fitxer: 0 min  
Temps acumulat sessiÃ³: 0 min
**Objectiu dâ€™aquesta diapositiva:** reconnectar mentalment amb el que ja saben, sense introduir res nou encara.

Dir-ho aixÃ­, tranquil:
> â€œFins ara hem fet dues coses importants:  
> tenir dades en XML i transformar-les amb XSLT.â€

Afegeix immediatament la pregunta clau:
> â€œPerÃ² avui ens hem de fer una pregunta incÃ²moda:  
> **quÃ¨ passa si les dades estan malament des del principi?**â€

No expliquis solucions encara.  
NomÃ©s **planteja el problema**.

---

## Problema real

<span class="highlight-green">I si algÃº envia aixÃ², **Ã©s correcte**?</span>

```xml
<preu>abc</preu>
```

<span style="color: green">SÃ­</span>
<!-- .element: class="fragment" data-fragment-index="2" -->


<span class="highlight-green">O aixÃ², **Ã©s correcte**?</span>

<!-- .element: class="fragment" data-fragment-index="3" -->

<span>

```xml
<llibre>
  <titol>Clean Code</titol>
</llibre>
```
</span>

<!-- .element: class="fragment" data-fragment-index="3" -->

<span style="color: green">SÃ­</span>
<!-- .element: class="fragment" data-fragment-index="4" -->

<span style="color: blue">El format Ã©s correcte, perÃ² <strong>el contingut, <span style="color: red"> Ã©s correcte?</span></strong></span>
<!-- .element: class="fragment" data-fragment-index="5" -->

<span style="color: red">NO, com a mÃ­nim el primer dels casos!</span>
<!-- .element: class="fragment" data-fragment-index="6" -->


Note:
Temps diapositiva: 4 min  
Temps acumulat fitxer: 3 min  
Temps acumulat sessiÃ³: 3 min
AquÃ­ **has de provocar resposta**.

Pregunta literal:
> â€œAixÃ² lâ€™XSLT ho pot transformar?â€

Deixa que responguin.  
Quan diguin que sÃ­, confirma:
> â€œExacte. Lâ€™XSLT transforma igualment.â€

I llavors remata:
> â€œPerÃ² el resultat **no tÃ© sentit**.  
> El problema no Ã©s la transformaciÃ³.  
> **El problema sÃ³n les dades.**â€

AixÃ² prepara el terreny per XSD.

---

<span>Abans de fer res amb un XML:</span>

<span>1. Sâ€™ha de comprovar que Ã©s correcte</span>
<!-- .element: class="fragment" data-fragment-index="1" -->

<span>2. Que compleix unes regles</span>
<!-- .element: class="fragment" data-fragment-index="2" -->

<h2>Idea clau</h2>
<!-- .element: class="fragment" data-fragment-index="3" -->

<h1>Transformar dades incorrectes <u>Ã©s perdre el temps!</u></h1>
<!-- .element: class="fragment" data-fragment-index="4" -->

Note:
Temps diapositiva: 4 min  
Temps acumulat fitxer: 7 min  
Temps acumulat sessiÃ³: 7 min
Aquesta Ã©s una **diapositiva dâ€™aturada**.  
No passis rÃ pid.

Llegeix la frase literalment:
> â€œTransformar dades incorrectes Ã©s perdre el temps.â€

DesprÃ©s explica:
> â€œSi les dades sÃ³n dolentes,  
> tot el que fem desprÃ©s tambÃ© ho serÃ .â€

I tanca amb la idea central:
> â€œAbans de transformar, **cal comprovar**.â€

Aquest Ã©s **el pont mental cap a XSD**.

---

## QuÃ¨ Ã©s XSD?
- Un **document que defineix les regles** dâ€™un XML
- Diu:
  - quines etiquetes poden aparÃ¨ixer
  - quines sÃ³n obligatÃ²ries
  - quin tipus de dades tenen

Note:
Temps diapositiva: 4 min  
Temps acumulat fitxer: 11 min  
Temps acumulat sessiÃ³: 11 min
No entris en sintaxi.  
No entris en fitxers encara.

ExplicaciÃ³ literal:
> â€œUn XSD Ã©s com un contracte.  
> Diu com han de ser les dades perquÃ¨ el sistema les accepti.â€

Remarca:
- **no crea dades**
- **no transforma dades**
- **nomÃ©s defineix regles**

AixÃ² ho reprendrÃ s al `0004`.

---

## Flux complet (ara sÃ­)
```
XML
 â†“
VALIDACIÃ“ (XSD)
 â†“
XSLT
 â†“
HTML
```

Note:
Temps diapositiva: 5 min  
Temps acumulat fitxer: 15 min  
Temps acumulat sessiÃ³: 15 min
Aquesta Ã©s **la diapositiva mÃ©s important del bloc**.  
AquÃ­ sÃ­, pausa.

Dir-ho pas a pas, assenyalant:
> â€œPrimer tenim dades.â€  
> â€œDesprÃ©s les validem.â€  
> â€œNomÃ©s si sÃ³n correctes, les transformem.â€

Remarca fort:
> â€œLâ€™XSD **va abans** de lâ€™XSLT.â€

AixÃ² connecta directament amb la prÃ ctica guiada que farÃ s desprÃ©s.

---

## Primer exemple
Tenim aquest XML:

```xml
<llibres>
  <llibre>
    <titol>Clean Code</titol>
    <preu>32</preu>
  </llibre>
</llibres>
```

<span>Ã‰s correcte?</span>
<!-- .element: class="fragment" data-fragment-index="1" -->
<br>
<span style="color: green;">
DepÃ¨n de les regles.
</span>
<!-- .element: class="fragment" data-fragment-index="2" -->


Note:
Temps diapositiva: 4 min  
Temps acumulat fitxer: 20 min  
Temps acumulat sessiÃ³: 20 min
Pregunta literal:
> â€œAixÃ² estÃ  bÃ© o estÃ  malament?â€

Quan dubtin, respon:
> â€œNo ho podem saberâ€¦  
> **fins que no definim les regles**.â€

Aquesta frase Ã©s clau:
> â€œUn XML no Ã©s correcte o incorrecte per si sol.  
> Ho Ã©s **respecte a unes regles**.â€



---

## Exemple de regla (XSD)
- Un llibre **ha de tenir**:
  - tÃ­tol (text)
  - autor (text)
  - preu (nÃºmero)

Si falta alguna cosa â†’ error.

Note:
Temps diapositiva: 3 min  
Temps acumulat fitxer: 24 min  
Temps acumulat sessiÃ³: 24 min
Explica-ho com a exigÃ¨ncia del sistema, no com a opiniÃ³.

Frase literal:
> â€œNo Ã©s que a mi mâ€™agradi aixÃ­.  
> Ã‰s que **el sistema ho exigeix aixÃ­**.â€

Remarca:
> â€œSi falta una etiqueta,  
> encara que el XML estigui ben escrit,  
> **el sistema no el pot acceptar**.â€

AixÃ² prepara el cap per la validaciÃ³ real.

---

## QuÃ¨ farem avui?
- Crear un XSD **molt simple**
- Validar un XML
- Veure:
  - quan Ã©s correcte
  - quan NO ho Ã©s

Note:
Temps diapositiva: 3 min  
Temps acumulat fitxer: 27 min  
Temps acumulat sessiÃ³: 27 min
Marca expectatives clares:
> â€œAvui no aprendrem tot lâ€™XSD.â€  
> â€œAprendrem **per quÃ¨ existeix** i com sâ€™utilitza.â€

Afegeix:
> â€œDesprÃ©s veurem errors tÃ­pics  
> i finalment ho farem pas a pas.â€

AquÃ­ ja estÃ s connectant mentalment amb el `0004` i el `0005`.

---

## Missatge important
> **XSD no corregeix errors.  
> XSD els detecta.**

Note:
Temps diapositiva: 2 min  
Temps acumulat fitxer: 30 min  
Temps acumulat sessiÃ³: 30 min
Llegeix-ho literalment.  
Pausa.  
Repeteix si cal.

ExplicaciÃ³ curta:
> â€œLâ€™XSD no arregla res.  
> NomÃ©s diu: aixÃ² estÃ  bÃ© o aixÃ² estÃ  malament.â€

Aquesta frase reapareixerÃ  moltes vegades.

---

## Mans a lâ€™obra
Ara:
1. Crearem `llibres.xsd`
2. El vincularem a `llibres.xml`
3. Provarem errors expressament

Note:
Temps diapositiva: 2 min  
Temps acumulat fitxer: 32 min  
Temps acumulat sessiÃ³: 32 min
Tancament dâ€™aquest fitxer.

Dir-ho aixÃ­:
> â€œAra ja tenim el perquÃ¨.  
> A continuaciÃ³ veurem **errors tÃ­pics**  
> i desprÃ©s ho farem nosaltres pas a pas.â€

ğŸ‘‰ **No comencis encara la prÃ ctica aquÃ­.**  
ğŸ‘‰ El segÃ¼ent `.reveal` (`0004`) Ã©s clau abans de tocar codi.
